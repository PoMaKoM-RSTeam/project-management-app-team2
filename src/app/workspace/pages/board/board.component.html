<div *ngIf="!board" class="spinner">
  <nz-spin nzSimple></nz-spin>
</div>
<section *ngIf="board" class="board">
  <h1 class="board__title">{{ board.title }}</h1>
  <div
    class="board__columns"
    cdkDropList
    cdkDropListOrientation="horizontal"
    (cdkDropListDropped)="drop($event)"
    [ngStyle]="{
      paddingLeft: isCollapsed? '100px': '260px',
      transition: '1.5s'
    }"
  >
<!--     <app-column
      class="board__column"
      *ngFor="let column of columns"
      [column]="column"
      cdkDrag
      (deleteColumn)="deleteColumn($event)"
    ></app-column> -->

    <div class="column" *ngFor="let column of columns" cdkDrag>
      <div class="column__title">
        <h2 class="column__order">{{column.order<10?'0'+column.order: column.order}}</h2>
        <h3 #h3 *ngIf="!(isTitleClicked === column._id)" class="column__h3" (click)="onTitleClick(column.title, column._id);">{{column.title}}</h3>
        <form class="column__form" [formGroup]="inputForm" *ngIf="isTitleClicked === column._id" autofocus>
          <input formControlName="myInput" class="column__input"  type="text" [(ngModel)]="column.title" autofocus>
          <span class="column__icon" nz-icon [nzType]="'check-circle'" nzTheme="outline" (click)="onSubmitForm(column)"></span>

          <span class="column__icon"
                nz-icon [nzType]="'close-circle'"
                [nzTheme]="'outline'"
                (click)="column.title = prevTitle; isTitleClicked = ''; this.isForbidChangeTitle = true;">
          </span>
        </form>
        <button nz-dropdown nzTrigger="click" [nzDropdownMenu]="menu" class="column__delete">. . .</button>
        <nz-dropdown-menu #menu="nzDropdownMenu">
          <ul nz-menu nzSelectable style="padding: 4px;">

            <li nz-menu-item (click)="deleteColumn(column._id)"><span nz-icon nzType="delete" nzTheme="outline" style="color: #da0b42; font-size: 2em;" ></span></li>
          </ul>
        </nz-dropdown-menu>
      </div>
<!--       <div class="alert" *ngIf="inputForm.get('myInput')?.errors?.['required']">{{"BOARD.REQUIRED_INPUT"| translate}}</div>
      <div class="alert" *ngIf="inputForm.get('myInput')?.errors?.['maxlength']">{{"BOARD.REQUIRED_MAX_VALUE"| translate}}</div> -->

      <div class="column__tasks"></div>
      <button class="column__button">+{{"BOARD.ADD_CARD"| translate}}</button>
    </div>




    <div style="display: flex; flex-direction: column; gap: 20px;">
      <div class="board__create-button" [cdkDragDisabled]="true" cdkDrag (click)="onCreateColumn()">
        {{"COLUMN.BUTTON" | translate}}
      </div>
    </div>
  </div>



  <div class="overlay" *ngIf="snowModal">
    <app-create-column-modal (createColumn)="createColumn($event)"  (closeOpen)="closeOpen($event)"></app-create-column-modal>
  </div>

</section>
